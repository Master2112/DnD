<?php
include "databasefunctions.php";
include "character.php";

$charJson = $_POST["json"];
$char = json_decode($charJson);

//var_dump($char);

$bigassSQL = "UPDATE `characters` SET"
		. "`name` = '" . addslashes($char->data->info->name) . "',"
		. "`level` = '" . $char->data->info->level . "',"
		. "`race` = '" . addslashes($char->data->info->race) . "',"
		. "`background` = '" . addslashes($char->data->info->background) . "',"
		. "`alignment` = '" . addslashes($char->data->info->alignment) . "',"
		. "`ownerid` = '" . $char->data->ownerId . "',"
		. "`experiencepoints` = '" . $char->data->info->experience . "',"
		. "`inspiration` = '" . $char->data->inspiration . "',"
		. "`inventory` = '" . addslashes($char->data->inventory) . "',"
		. "`languages` = '" . addslashes($char->data->skills->languages) . "',"
		. "`proficiencies` = '" . addslashes($char->data->skills->proficiencies) . "',"
		. "`features` = '" . addslashes($char->data->skills->features) . "',"
		. "`personalitytraits` = '" . addslashes($char->data->personality->traits) . "',"
		. "`ideals` = '" . addslashes($char->data->personality->ideals) . "',"//
		. "`bonds` = '" . addslashes($char->data->personality->bonds) . "',"
		. "`flaws` = '" . addslashes($char->data->personality->flaws) . "',"
		. "`age` = '" . $char->data->info->age . "',"
		. "`eyes` = '" . addslashes($char->data->info->appearance->eyes) . "',"
		. "`height` = '" . addslashes($char->data->info->appearance->height) . "',"
		. "`skin` = '" . addslashes($char->data->info->appearance->skin) . "',"
		. "`weight` = '" . $char->data->info->weight . "',"
		. "`hair` = '" . addslashes($char->data->info->appearance->hair) . "',"
		. "`allies` = '" . addslashes($char->data->info->allies) . "',"
		. "`organizations` = '" . addslashes($char->data->info->organizations) . "',"
		. "`imageurl` = '" . $char->data->info->appearance->imageURL . "',"
		. "`backstory` = '" . addslashes($char->data->info->backstory) . "',"
		. "`currenthealth` = '" . $char->data->status->currentHealth . "',"
		. "`assignedgameid` = '" . $char->data->assignedGameId . "',"
		. "`playerpositiveratings` = '" . $char->data->ratings->asPlayer->positive . "',"
		. "`playernegativeratings` = '" . $char->data->ratings->asPlayer->negative . "',"
		. "`masterpositiveratings` = '" . $char->data->ratings->asMaster->positive . "',"
		. "`masternegativeratings` = '" . $char->data->ratings->asMaster->negative . "',"
		. "`dead` = '" . $char->data->isPermanentlyDead . "',"
		. "`location` = '" . addslashes($char->data->status->location) . "',"
		. "`speed` = '" . $char->data->stats->speed . "',"
		. "`strength` = '" . $char->data->stats->strength . "',"
		. "`dexterity` = '" . $char->data->stats->dexterity . "',"
		. "`constitution` = '" . $char->data->stats->constitution . "',"
		. "`intelligence` = '" . $char->data->stats->intelligence . "',"
		. "`wisdom` = '" . $char->data->stats->wisdom . "',"
		. "`charisma` = '" . $char->data->stats->charisma . "',"
		. "`hassavingstrengthbonus` = '" . $char->data->stats->bonusses->savingThrows->strength . "',"
		. "`hassavingdexteritybonus` = '" . $char->data->stats->bonusses->savingThrows->dexterity . "',"
		. "`hassavingconstitutionbonus` = '" . $char->data->stats->bonusses->savingThrows->constitution . "',"
		. "`hassavingintelligencebonus` = '" . $char->data->stats->bonusses->savingThrows->intelligence . "',"
		. "`hassavingwisdombonus` = '" . $char->data->stats->bonusses->savingThrows->wisdom . "',"
		. "`hassavingcharismabonus` = '" . $char->data->stats->bonusses->savingThrows->charisma . "',"
		. "`hasacrobaticsskillbonus` = '" . $char->data->stats->bonusses->skills->acrobatics . "',"
		. "`hasanimalhandlingskillbonus` = '" . $char->data->stats->bonusses->skills->animalHandling . "',"
		. "`hasarcanaskillbonus` = '" . $char->data->stats->bonusses->skills->arcana . "',"
		. "`hasathleticsskillbonus` = '" . $char->data->stats->bonusses->skills->athletics . "',"
		. "`hasdeceptionskillbonus` = '" . $char->data->stats->bonusses->skills->deception . "',"
		. "`hashistoryskillbonus` = '" . $char->data->stats->bonusses->skills->history . "',"
		. "`hasinsightskillbonus` = '" . $char->data->stats->bonusses->skills->insight . "',"
		. "`hasintimidationskillbonus` = '" . $char->data->stats->bonusses->skills->intimidation . "',"
		. "`hasinvestigationskillbonus` = '" . $char->data->stats->bonusses->skills->investigation . "',"
		. "`hasmedicineskillbonus` = '" . $char->data->stats->bonusses->skills->medicine . "',"
		. "`hasnatureskillbonus` = '" . $char->data->stats->bonusses->skills->nature . "',"
		. "`hasperceptionskillbonus` = '" . $char->data->stats->bonusses->skills->perception . "',"
		. "`hasperformanceskillbonus` = '" . $char->data->stats->bonusses->skills->performance . "',"
		. "`haspersuasionskillbonus` = '" . $char->data->stats->bonusses->skills->persuasion . "',"
		. "`hasreligionskillbonus` = '" . $char->data->stats->bonusses->skills->religion . "',"
		. "`hassleighofhandskillbonus` = '" . $char->data->stats->bonusses->skills->sleighOfHand . "',"
		. "`hasstealthskillbonus` = '" . $char->data->stats->bonusses->skills->stealth . "',"
		. "`hassurvivalskillbonus` = '" . $char->data->stats->bonusses->skills->survival . "',"
		. "`passivewisdombonus` = '" . $char->data->stats->bonusses->passiveWisdom . "',"
		. "`hasacrobaticsexpertise` = '" . $char->data->stats->bonusses->expertise->acrobatics . "',"//
		. "`hasanimalhandlingexpertise` = '" . $char->data->stats->bonusses->expertise->animalHandling . "',"
		. "`hasarcanaexpertise` = '" . $char->data->stats->bonusses->expertise->arcana . "',"
		. "`hasathleticsexpertise` = '" . $char->data->stats->bonusses->expertise->athletics . "',"
		. "`hasdeceptionexpertise` = '" . $char->data->stats->bonusses->expertise->deception . "',"
		. "`hashistoryexpertise` = '" . $char->data->stats->bonusses->expertise->history . "',"
		. "`hasinsightexpertise` = '" . $char->data->stats->bonusses->expertise->insight . "',"
		. "`hasintimidationexpertise` = '" . $char->data->stats->bonusses->expertise->intimidation . "',"
		. "`hasinvestigationexpertise` = '" . $char->data->stats->bonusses->expertise->investigation . "',"
		. "`hasmedicineexpertise` = '" . $char->data->stats->bonusses->expertise->medicine . "',"
		. "`hasnatureexpertise` = '" . $char->data->stats->bonusses->expertise->nature . "',"
		. "`hasperceptionexpertise` = '" . $char->data->stats->bonusses->expertise->perception . "',"
		. "`hasperformanceexpertise` = '" . $char->data->stats->bonusses->expertise->performance . "',"
		. "`haspersuasionexpertise` = '" . $char->data->stats->bonusses->expertise->persuasion . "',"
		. "`hasreligionexpertise` = '" . $char->data->stats->bonusses->expertise->religion . "',"
		. "`hassleighofhandexpertise` = '" . $char->data->stats->bonusses->expertise->sleighOfHand . "',"
		. "`hasstealthexpertise` = '" . $char->data->stats->bonusses->expertise->stealth . "',"
		. "`hassurvivalexpertise` = '" . $char->data->stats->bonusses->expertise->survival . "',"
		. "`initiative` = '" . $char->data->stats->initiative . "',"
		. "`hitdice` = '" . $char->data->hitDice . "',"
		. "`spellcastingclass` = '" . addslashes($char->data->spellcasting->casterClass) . "'"
		. "WHERE `id` = '" . $char->data->id . "';";
		
$connection = Connect();
echo $bigassSQL; 
mysqli_query($connection, $bigassSQL);
Disconnect($connection);